@model Public.Models.VM.ApartmentVM
@{
    ViewBag.Title = Model.Apartment.Name;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>

    .ap-name {
        text-align: center;
        margin-top: 2%;
        margin-bottom: 2%;
        font-family: 'Lobster', cursive;
    }

    .apartment-images {
        display: flex;
        justify-content: center;
    }

    .apt-img {
        width: 20%;
        margin: 1%;
        border-radius: 20px;
    }

    .stars {
        text-align: center;
        margin-top: 2%;
        margin-bottom: 4%;
    }

    .reviews {
        font-family: 'Lobster', cursive;
    }

    .review {
        display: flex;
        margin-top: 2%;
        margin-bottom: 2%;
    }

    .rev-header {
        text-align: center;
        font-family: 'Lobster', cursive;
    }

    .comment {
        text-align: center;
        border-right: 4px solid black;
    }

    .rating {
        text-align: center;
        margin: auto;
    }

    .apt-info {
        width: 10%;
        display: block;
    }

    .apt-all-info {
        font-family: 'Lobster', cursive;
    }

    .apt-info-header {
        display: block;
        margin: auto;
        text-align: center;
        border-bottom: 2px solid gray;
    }

    .apt-info-value {
        margin: auto;
    }

    .no-review {
        font-family: 'Lobster', cursive;
        text-align: center;
    }

    .extras {
        display: flex;
        justify-content: center;
        font-family: 'Lobster', cursive;
    }

    .review-button {
        font-family: 'Lobster', cursive;
        color: gray;
        background: white;
        border: 2px solid black;
        border-radius: 10px;
        padding: 5px 10px 5px 10px;
        font-size: 2vh;
        text-decoration: none;
    }

        .review-button:hover {
            background-color: gray;
            color: white;
            text-decoration: none;
        }

    .warning-modal {
        position: fixed;
        top: 30%;
        left: 37.5%;
        width: 25%;
        max-width: 30%;
        height: fit-content;
        transform: scale(0);
        transition: 200ms ease-in-out;
        border-radius: 20px;
        z-index: 999;
        background: radial-gradient(343px at 46.3% 47.5%, rgb(242, 242, 242) 0%, rgb(241, 241, 241) 72.9%);
        text-align: center;
        font-family: 'Roboto Condensed', sans-serif;
    }

        .warning-modal.active {
            transform: scale(1);
            z-index: 999;
        }


    .gallery-btn {
        font-family: 'Lobster', cursive;
        font-size: 2vh;
        background-color: white;
        border: 2px solid black;
        border-radius: 10px;
        padding: 5px;
    }

    .gallery-btn:hover{
        background-image:linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%);
    }

    .gallery-modal {
        width: 60%;
        border-radius: 20px;
        background-image: linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%);
        position:fixed;
        top:10%;
        left:20%;
        z-index:999;
        transform:scale(1);
        transition:200ms ease-in-out;
    }

    .gallery-modal.active{
        transform:scale(1);
    }

    .carousel-item img{
        border-radius:20px;
    }

    .sr-only{
        text-decoration:none;
    }



</style>

<div class="warning-modal" id="warning-modal">

    <h3>Obavijest</h3>

    <p>Molimo prijavite se ili registrirajte kako biste mogli napisati recenziju!</p>

</div>

<div class="apartment" data-aos="zoom-in">

    <div class="ap-name">

        <h1>@Model.Apartment.Name</h1>



    </div>

    <div class="apartment-images">

        <img class="apt-img" src="https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8YXBhcnRtZW50fGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60" alt="">
        <img class="apt-img" src="https://images.unsplash.com/photo-1502672023488-70e25813eb80?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8YXBhcnRtZW50fGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60" alt="">
        <img class="apt-img" src="https://images.unsplash.com/photo-1512918728675-ed5a9ecdebfd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTJ8fGFwYXJ0bWVudHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60" alt="">
        <img class="apt-img" src="https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTd8fGFwYXJ0bWVudHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60" alt="">

    </div>

    @*<div class="d-flex justify-content-center mt-5">

        <button data-modal-target="#gallery-modal" class="gallery-btn">Otvori galeriju</button>

    </div>*@

    <div class="gallery-modal" id="gallery-modal">

        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">

            <div class="carousel-inner">

                <div class="carousel-item active">

                    <img src="https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8YXBhcnRtZW50fGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60" />

                </div>

                <div class="carousel-item">

                    <img src="https://images.unsplash.com/photo-1502672023488-70e25813eb80?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8YXBhcnRtZW50fGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=500&q=60" />

                </div>

                <div class="carousel-item">

                    <img src="https://images.unsplash.com/photo-1512918728675-ed5a9ecdebfd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTJ8fGFwYXJ0bWVudHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60" />

                </div>

                <div class="carousel-item">

                    <img src="https://images.unsplash.com/photo-1484154218962-a197022b5858?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTd8fGFwYXJ0bWVudHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60" />

                </div>

            </div>

            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">

                <span class="carousel-control-prev-icon" aria-hidden="true"></span>

            </a>

            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">

                <span class="carousel-control-next-icon" aria-hidden="true"></span>

            </a>


        </div>


    </div>

    <div class="stars">

        @for (int i = 0; i < Model.Rating; i++)
        {
            <img src="~/Images/star-icon.svg" width="70px" height="70px" alt="">
        }

    </div>

    <div class="apt-all-info w-100 mb-5 d-flex justify-content-center">

        <div class="apt-info mx-3">

            <div class="apt-info-header">

                <img src="~/Images/status-icon.svg" width="50px" height="50px" alt="">
                <h3>Status</h3>

            </div>

            <div class="apt-info-value d-flex justify-content-center mt-3">

                <h3>@Model.Apartment.ApartmentStatus.Name</h3>

            </div>

        </div>

        <div class="apt-info mx-3">

            <div class="apt-info-header">

                <img src="~/Images/city-icon.svg" width="50px" height="50px" alt="">
                <h3>Grad</h3>

            </div>

            <div class="apt-info-value d-flex justify-content-center mt-3">

                <h3>@Model.Apartment.City</h3>

            </div>

        </div>

        <div class="apt-info mx-3">

            <div class="apt-info-header">

                <img src="~/Images/point-icon.svg" width="50px" height="50px" alt="">
                <h3>Adresa</h3>

            </div>

            <div class="apt-info-value d-flex justify-content-center mt-3">

                <h3>@Model.Apartment.Address</h3>

            </div>

        </div>

        <div class="apt-info mx-3">

            <div class="apt-info-header">

                <img src="~/Images/price-icon.svg" width="50px" height="50px" alt="">
                <h3>Cijena</h3>

            </div>

            <div class="apt-info-value d-flex justify-content-center mt-3">

                <h3>@Model.Apartment.Price HRK</h3>

            </div>

        </div>

        <div class="apt-info mx-3">

            <div class="apt-info-header">

                <img src="~/Images/adult-icon.svg" width="50px" height="50px" alt="">
                <h3>Odrasli</h3>

            </div>

            <div class="apt-info-value d-flex justify-content-center mt-3">

                <h3>@Model.Apartment.MaxAdults</h3>

            </div>

        </div>

        <div class="apt-info mx-3">

            <div class="apt-info-header">

                <img src="~/Images/kids-icon.svg" width="50px" height="50px" alt="">
                <h3>Djeca</h3>

            </div>

            <div class="apt-info-value d-flex justify-content-center mt-3">

                <h3>@Model.Apartment.MaxChildren</h3>

            </div>

        </div>

        <div class="apt-info mx-3">

            <div class="apt-info-header">

                <img src="~/Images/room-icon.svg" width="50px" height="50px" alt="">
                <h3>Sobe</h3>

            </div>

            <div class="apt-info-value d-flex justify-content-center mt-3">

                <h3>@Model.Apartment.TotalRooms</h3>

            </div>

        </div>

        <div class="apt-info mx-3">

            <div class="apt-info-header">

                <img src="~/Images/beach-icon.svg" width="50px" height="50px" alt="">
                <h3>Plaža</h3>

            </div>

            <div class="apt-info-value d-flex justify-content-center mt-3">

                <h3>@Model.Apartment.BeachDistance m</h3>

            </div>

        </div>

    </div>

    @if (Model.AssignedTags.Count > 0)
    {
        <div class="rev-header">
            <h2>Sadržaj</h2>
        </div>

        <div class="extras">

            @foreach (DatabaseLib.MODELS.AssignedTag tag in Model.AssignedTags)
            {
                <h3 class="mx-2">@tag.Name</h3>
            }

        </div>
    }

    <div class="rev-header">
        <h2>Recenzije</h2>
    </div>

    @if (Model.ApartmentReviews.Count == 0)
    {
        <div class="no-review m-3 w-100">

            <h3>Ovaj apartman nema recenzija.</h3>

        </div>
    }
    else
    {
        foreach (DatabaseLib.MODELS.ApartmentReview review in Model.ApartmentReviews)
        {
            <div class="reviews d-flex justify-content-center">

                <div class="review w-50">

                    <div class="comment w-50 ">

                        <h3>@review.Details</h3>

                    </div>

                    <div class="rating w-50 ">

                        @for (int i = 0; i < review.Stars; i++)
                        {
                            <img src="~/Images/star-icon.svg" width="30px" height="30px" alt="">
                        }

                    </div>

                </div>

            </div>
        }
    }

    <div class="d-flex justify-content-center mt-5">

        @if (Session["user"] == null)
        {
            <button data-modal-target="#warning-modal" class="review-button">Ostavi recenziju</button>
        }
        else if (Session["user"] != null)
        {

            <a href="@Url.Action("Review","Apartment", new { apartmentId = Model.Apartment.Id })" class="review-button">Ostavi recenziju</a>

        }

    </div>






</div>

<script>

    function closeGallery() {

        const modals = document.querySelectorAll('.gallery-modal.active')
        modals.forEach(modal => {
            closeModal(modal)
        })
    }

</script>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>




